<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">

    <title>Chicago Gentrification Model and Visualization </title>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">

    <!-- Openlayer Sytle Sheet -->
	<link rel="stylesheet" href="https://openlayers.org/en/v3.19.1/css/ol.css" type="text/css">

    <!-- Custom styles for this template -->
    <link href="assets/css/main.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="assets/js/hover.zoom.js"></script>
    <script src="assets/js/hover.zoom.conf.js"></script>
    <script src="assets/js/map.js"></script>
    <script src="https://openlayers.org/en/v3.19.1/build/ol.js" type="text/javascript"></script>
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <!-- Static navbar -->
    <div class="navbar navbar-inverse navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">EDMOND</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="projects.html">Projects</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="blog.html">Blog</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
	
	
	<!-- +++++ Projects Section +++++ -->


	<div class="container pt">
		<div class="row mt">
			<div class="col-lg-6 col-lg-offset-3 centered">
				<h3>Chicago’s Neighborhood Gentrification Model and Visualization</h3>
				<hr>
				<p>This project is part of GEOG 480 - Principle of GIS. The followings are the key points for this project:</p>
				</p>
				<p>
				  <ul>
				    <li>Define scope of study and create E-R model and O-O model using key gentrification indicators</li><br>
				    <li>Collect and insert Census and shapefile data to PostgreSQL via Jupyter Notebook by using SQL script</li><br>
				    <li>Perform rankings analysis using Python to identify neighborhoods with high gentrification values</li><br>
				    <li>Publish result as a web map using OpenLayers and stylize the result with CSS and HTML</li>
				  </ul>
			</div>
		</div>


	<!--  Legend and Map-->
	
	<table>
	<td valign="middle" width="15%">
	<tr>
	<td>
	  <div class='my-legend'>
		<div class='legend-title'>Level of Gentrification</div>
		  <div class='legend-scale'>
			<ul class='legend-labels'>
    		  <li><span style='background:#fee8c8;'></span>Low Gentrification</li>
    		  <li><span style='background:#fdbb84;'></span>Medium Gentrification</li>
    		  <li><span style='background:#e34a33;'></span>High Gentrification</li>
			</ul>
		</div>
		  <div class='legend-source'>Source: <a href="https://www.census.gov/" target="_blank">https://www.census.gov/</a></div>
	  </div>
    </td>

    <td>
      <div align="center" id="map1" class="map"></div>
        <div align="center" id="mouseval"></div>
          <div id="info"></div>

        <br>
        <div align="center">
      		<button id="rotate-left" title="Rotate clockwise">↻</button>
      		<button id="rotate-right" title="Rotate counterclockwise">↺</button>
      		<button id="pan-to-chicago">Pan to Chicago</button>
      		<button id="show-2012">2012-2013</button>
      		<button id="show-2013">2013-2014</button>


     		
     		<select id="genLevel">
      		  <option>Select a level</option>
      		  <option value="high">High Gentrification Neighborhood</option>
      		  <option value="medium">Medicum Gentrification Neighborhood</option>
      		  <option value="low">Low Gentrification Neighborhood</option>
      		</select>

      		<select id="genYear">
      		  <option>Select a year</option>
      		  <option value="2012">2012</option>
      		  <option value="2013">2013</option>
      		</select>

      		
      		<button id="submit">Submit</button>
    	</div>
      </div>
    </td>
    </tr>
</table>	


	

	<!-- End Map -->

	<!-- Map Description -->
	<div class="row mt">
			<div class="col-lg-6 col-lg-offset-3 centered">
				
				<hr>
				<p>Gentrification is a process of renovation and revival of deteriorated urban neighborhoods through the influx of more affluent residents, which results in increased property values and the displacing of lower-income families and small businesses.</p>
				
				<p>This map uses the following gentrification indicators: 
			  	  <ul>-Age</ul>
			  	  <ul>-Income</ul>
			  	  <ul>-Education Level</ul>
			  	  <ul>-Property Value</ul>
			  	  <ul>-Occupancy Type</ul>
			  	  <ul>-Housing Vacancy Level</ul>
				</p>

				<p>Changes were calculated between the two years based on the census tract data. One point is added to the total gentrification score where census tract is in the highest 25th percentile.</p>
			</div>
		</div>
		


	<!-- +++++ About Project Section +++++ -->
			
		<div class="row mt centered">	
			<div class="col-lg-8 col-lg-offset-2">	
				<p><bt>Partner: <a href="http://www.illinois.edu" target="_blank">University of Illinois</a></bt> - <bt>Type: <a href="#">GIS Analysis and Webmap</a></bt> - <bt>Date: <a href="#">Dec 2016</a></bt></p>
			</div>
		</div><!-- /row -->
	</div><!-- /container -->



	
	
	<!-- +++++ Footer Section +++++ -->
	
	<div id="footer">
		<div class="container">
			<div class="row">
				<div class="col-lg-4">
					<h4>Site Map</h4>
					<p>
						<a href="index.html">Home</a><br/>
						<a href="projects.html">Projects</a><br/>
						<a href="about.html">About</a><br/>
						<a href="blog.html">Blog</a><br>
						<a href="contact.html">Contact</a><br>
					</p>
				</div><!-- /col-lg-4 -->
				
				<div class="col-lg-4">
					<h4>My Links</h4>
					<p>
						<a href="https://www.linkedin.com/in/edmondklai" target="_blank">Linkedin</a><br/>
						<a href="https://www.facebook.com/Ed.K.Lai" target="_blank">Facebook</a><br/>
						<a href="https://twitter.com/EdKLai" target="_blank">Twitter</a>
					</p>
				</div><!-- /col-lg-4 -->
				
				<div class="col-lg-4">
					<h4>About Edmond</h4>
					<p>All rights reserved for edmondklai.net</p>
				</div><!-- /col-lg-4 -->
			
			</div>
		
		</div>
	</div>
	

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="assets/js/bootstrap.min.js"></script>

    <!-- Testing -->
    <script>
 	var view = new ol.View({
         // the view's initial state
         center: ol.proj.transform([-87.6298,41.8781], 'EPSG:4326', 'EPSG:3857'),  //Center the map at Chicago at load
         zoom: 10
       }); 
      var map = new ol.Map({     //Create the base map layer!
        target: 'map1',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM()
          })
        ],
        controls: ol.control.defaults().extend([
          new ol.control.ScaleLine()
        ]),
        view: view
		/*new ol.View({
          center: ol.proj.transform([-87.6298,41.8781], 'EPSG:4326', 'EPSG:3857'),  //Center the map at Chicago at load
          zoom: 10
        })*/
      });
     
	  var rotateLeft = document.getElementById('rotate-left');
	        rotateLeft.addEventListener('click', function() {
	          var rotateLeft = ol.animation.rotate({
	            duration: 2000,
	            rotation: -4 * Math.PI
	          });
	          map.beforeRender(rotateLeft);
	        }, false);
	  var rotateRight = document.getElementById('rotate-right');
	        rotateRight.addEventListener('click', function() {
	          var rotateRight = ol.animation.rotate({
	            duration: 2000,
	            rotation: 4 * Math.PI
	          });
	          map.beforeRender(rotateRight);
	        }, false);
			
			
			   
     var chicago = ol.proj.fromLonLat([-87.6298,41.8781]);
	  
     
	 var cenSource2012 = new ol.source.TileWMS({
	         preload: Infinity,
	         url: 'http://141.142.170.193:8080/geoserver/wms',
	         serverType:'geoserver',
	         params:{
	            'LAYERS':"elai4:Data_2012", 'TILED':true
	          }         
	        })
	 var cenSource2013 = new ol.source.TileWMS({
	   	         preload: Infinity,
	   	         url: 'http://141.142.170.193:8080/geoserver/wms',
	   	         serverType:'geoserver',
	   	         params:{
	   	            'LAYERS':"elai4:Data_2013", 'TILED':true
	   	          }

	   	        })
     


     var sourceSQ = new ol.source.TileWMS({
          	preload: Infinity,
          	url: 'http://141.142.170.193:8080/geoserver/wms',
          	serverType:'geoserver',
          	params:{
            	'LAYERS':"elai4:spatialQ", 'TILED':true, viewparams: 'genMin:10'
            	//viewparams: 'year:'+ year
            	//viewparams: 'genMin:' + genMin,
            	//viewparams: 'genMax:' + genMax
          	}  
        })   
     

     var wmslayer2012 = new ol.layer.Tile({
		 source: cenSource2012
	 });
	 	
      var wmslayer2013 = new ol.layer.Tile({
		  source: cenSource2013
      })
      
	  var wmslayerSpatialQ = new ol.layer.Tile({
          source: sourceSQ
      })

      var el = document.getElementById("submit")
   	  el.addEventListener("click",requestSpatial,false)	

   	  function requestSpatial(){
    	var submit = document.getElementById("submit")
     	if (genYear.value == "2012") {
     			year = 2012    			
     			if (genLevel.value == "high") {
     				genMin = 4
     				genMax = 20
     			}
     			else if (genLevel.value == "medium") {
     				genMin = 2
     				genMax = 3
     			}
     			else {
     				genMin = -1
     				genMax = 1
     			}
     		}
     		if (genYear.value == "2013") {
     			year = 2013
     			
     			if (genLevel.value == "high") {
     				genMin = 4
     				genMax = 20
     			}
     			else if (genLevel.value == "medium") {
     				genMin = 2
     				genMax = 3
     			}
     			else {
     				genMin = -1
     				genMax = 1
     			}
     		}
      map.removeLayer(wmslayer2013);
      map.removeLayer(wmslayer2012);
      map.removeLayer(wmslayerSpatialQ);
      map.addLayer(wmslayerSpatialQ);
      };
	 
     //map.addLayer(wmslayer2012);
     wmslayer2012.setOpacity(.7);
     wmslayer2013.setOpacity(.7);
     wmslayerSpatialQ.setOpacity(.7);
     
  	 var panToChicago = document.getElementById('pan-to-chicago');  //pan to Chicago
      panToChicago.addEventListener('click', function() {
        var pan = ol.animation.pan({
          duration: 2000,
		  source: /** @type {ol.Coordinate} */ (view.getCenter())
        });
        map.beforeRender(pan);
        view.setCenter(chicago);
        
      }, false)

  
	document.getElementById('show-2013').addEventListener('click', function() {
	  	map.removeLayer(wmslayer2013);
      	map.removeLayer(wmslayer2012);
      	map.removeLayer(wmslayerSpatialQ);
		map.addLayer(wmslayer2013);
	  });

    document.getElementById('show-2012').addEventListener('click', function() {
      map.removeLayer(wmslayer2013);
      map.removeLayer(wmslayer2012);
      map.removeLayer(wmslayerSpatialQ);
      map.addLayer(wmslayer2012);
    });
	  	
	
	  
	  
	  
	  
        
     var mousePositionControl = new ol.control.MousePosition({
         className:'ol-full-screen', 
         coordinateFormat:ol.coordinate.createStringXY(4), 
         projection:"EPSG:4326", 
         className:"custom-mouse-position",
         target:'mouseval', 
         undefinedHTML: '&nbsp;' 
     });
     map.addControl(mousePositionControl);
    </script>

    <!-- End Testing -->



  </body>
</html>
